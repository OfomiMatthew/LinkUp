{% load static %}

<div id="create-post-modal" class="modal">
  <div class="modal-background"></div>
  <div class="modal-card">
    <header class="modal-card-head">
      <p class="modal-card-title">Create Post</p>
      <button class="delete" aria-label="close"></button>
    </header>
    <section class="modal-card-body">
      <form method="POST" action="{% url 'upload' %}" enctype="multipart/form-data">
        {% csrf_token %}

        <div class="field">
          <label class="label">Upload Image</label>
          <div class="control">
            <div class="file has-name is-boxed">
              <label class="file-label">
                <input class="file-input" type="file" name="image-upload" id="image-upload"  accept="image/*, video/*, audio/mpeg">
                <span class="file-cta">
                  <span class="file-icon">
                    <i class="material-icons">cloud_upload</i>
                  </span>
                  <span class="file-label">
                    Choose a fileâ€¦
                  </span>
                </span>
                <span class="file-name" id="file-name">
                  No file selected
                </span>
              </label>
            </div>
          </div>
        </div>
        
        <div class="field">
          <label class="label">Caption</label>
          <div class="control">
            <textarea class="textarea" name="caption" placeholder="Write your post..."></textarea>
          </div>
        </div>
      
        <button class="button is-success" type="Submit" >Post</button>
        <button class="button cancel-button" type="button">Cancel</button>
       
      </form>
    </section>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const fileInput = document.getElementById('image-upload');
    const fileName = document.getElementById('file-name');

    fileInput.addEventListener('change', () => {
      if (fileInput.files.length > 0) {
        fileName.textContent = fileInput.files[0].name;
      }
    });
  });
</script>
